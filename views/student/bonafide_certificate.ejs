<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bonafide Certificate</title>
  <!-- Include html2pdf library -->
  <script src="https://rawgit.com/eKoopmans/html2pdf/master/dist/html2pdf.bundle.js"></script>
  <style>
    /* Add your CSS styles here */
    .space {
      word-spacing: 0.1cm;
    }
  </style>

<script>

  // document.addEventListener('DOMContentLoaded', function() {
  //   // Automatically generate and download PDF when the page loads
  //   generatePDF();
  // });

  // function generatePDF() {
  //   var element = document.getElementById('window_layout'); // Replace 'window_layout' with the ID of the container you want to convert to PDF

  //   html2pdf(element, {
  //     margin: 10,
  //     filename: 'bonafide_certificate.pdf',
  //     image: { type: 'jpeg', quality: 0.98 },
  //     html2canvas: { scale: 2 },
  //     jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
  //   }).then(function(pdf) {
  //     // Open the PDF in a new window
  //     var blobUrl = URL.createObjectURL(pdf.output('blob'));
  //     window.open(blobUrl, '_blank');
  //   });
  // }

  // function redirectToPrint() {
  //   // Redirect to the print page or perform your print logic
  //   window.location.href = "/student/bonafide_certificate/<%=student.rollno%>/<%=student.id%>/<%=student.section%>";
  // }
  document.addEventListener('DOMContentLoaded', function() {
      document.getElementById('pdfButton').addEventListener('click', function() {
        generatePDF();
      });
    });

    function generatePDF() {
      var element = document.getElementById('window_layout'); // Replace 'window_layout' with the ID of the container you want to convert to PDF

      html2pdf(element, {
        margin: 10,
        filename: 'bonafide_certificate.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
      }).then(function(pdf) {
        // Open the PDF in a new window
        var blobUrl = URL.createObjectURL(pdf.output('blob'));
        window.open(blobUrl, '_blank');
      });
    }
  
</script>

</head>
<body>
  <div class="window" id="window_layout">
    <% if(role === "student") { %>
    <div class="window_navbar">
      <% include('../partials//student/navigation_bar.ejs',{notification}) %>
    </div>
    <% } else { %>
    <div class="window_navbar">
      <% include('../partials/parent/navigation_bar.ejs',{notification}) %>
    </div>
    <% } %>
    <div class="float_left">
      <a href="/student_index/<%=student.rollno %>/<%= student.id %>" id="toggleButton"><button class="btn_warning">Go Back</button></a>
    </div>
    <div class="window_container">  
      <div class="container center_title">
        BONAFIDE CERTIFICATE
        <!-- <button onclick="generatePDF()">Download PDF</button> -->
        <button id="pdfButton">Download PDF</button>
      </div>
      <div class="popup_container">
        <div class="popup" id="popup">
          <div class="popup_header">
            <span class="close_icon" id="closePopup"></span>
          </div>
          <div class="popup_header">
            <p class="pop_title">Bonafide certificate</p>
          </div>
          <form id="myPdf">
            <pre>
              <p class="space">This is to certify that MR./MRS <b><%= student.name %></b>, S/O or D/O of Mr./Mrs, Father's Name: <b><%= student.father_name %></b><br>
                with Roll Number <b><%= student.rollno %></b>  is a student of year <b><%= student.id %></b> section of the student <b><%= student.section %></b> 
                <br>studying in (school/college) <b><%= common[0].school_name %>.</b>
              </p><br>
              -------------------                        ----------------------------        ------------------                  
              <br> Signature of the principal/Dean        University/College/School Address             Date     
            </pre>
          </form>                                                       
        </div>  
      </div>
    </div>
  </div>
<!--   
  <script>
    function generatePDF() {
      var element = document.getElementById('window_layout');
      html2pdf(element, {
        margin: 10,
        filename: 'bonafide_certificate.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
      }).then(function(pdf) {
        // Open the PDF in a new tab
        var blobUrl = URL.createObjectURL(pdf.output('blob'));
        window.open(blobUrl, '_blank');
      });
    }
  </script> -->
</body>
</html>
